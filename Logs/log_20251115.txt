2025-11-15 00:27:08.323 +08:00 [INF] Now listening on: http://localhost:5232
2025-11-15 00:27:08.350 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-15 00:27:08.350 +08:00 [INF] Hosting environment: Development
2025-11-15 00:27:08.350 +08:00 [INF] Content root path: /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4
2025-11-15 00:28:10.605 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/weatherforecast/ - null null
2025-11-15 00:28:10.622 +08:00 [WRN] Failed to determine the https port for redirect.
2025-11-15 00:28:10.624 +08:00 [INF] Executing endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:28:10.631 +08:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[WebApplication11.WeatherForecast] Get() on controller WebApplication11.Controllers.WeatherForecastController (WebApplication11).
2025-11-15 00:28:10.634 +08:00 [INF] Executing ObjectResult, writing value of type 'WebApplication11.WeatherForecast[]'.
2025-11-15 00:28:10.665 +08:00 [INF] Executed action WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11) in 32.6213ms
2025-11-15 00:28:10.666 +08:00 [INF] Executed endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:28:10.667 +08:00 [INF] HTTP GET /weatherforecast/ responded 200 in 51.9503 ms
2025-11-15 00:28:10.668 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/weatherforecast/ - 200 null application/json; charset=utf-8 64.1541ms
2025-11-15 00:28:19.084 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/test-employees - null null
2025-11-15 00:28:19.087 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:28:19.092 +08:00 [INF] Route matched with {action = "GetAllEmployees", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEmployees() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:28:19.602 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[FirstName], [e].[Lastname], [e].[DateHired], [e].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
2025-11-15 00:28:19.613 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MiniHRIS4.DTOs.EmployeeDTO, WebApplication11, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-15 00:28:19.618 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11) in 525.1564ms
2025-11-15 00:28:19.618 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:28:19.618 +08:00 [INF] HTTP GET /employees/test-employees responded 200 in 532.4365 ms
2025-11-15 00:28:19.621 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/test-employees - 200 null application/json; charset=utf-8 537.8159ms
2025-11-15 00:28:26.663 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/db-error-test - null null
2025-11-15 00:28:26.665 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:28:26.670 +08:00 [INF] Route matched with {action = "DbErrorTest", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DbErrorTest() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:28:26.803 +08:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT * FROM NonExistentTable
2025-11-15 00:28:26.813 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniHRIS4.Models.MiniHRIS4Context'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e9a84c07-275c-456f-8541-8a57af7950ae
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e9a84c07-275c-456f-8541-8a57af7950ae
Error Number:208,State:1,Class:16
2025-11-15 00:28:26.814 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11) in 142.8786ms
2025-11-15 00:28:26.814 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:28:26.814 +08:00 [ERR] Unhandled exception occurred
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MiniHRIS4.Services.MiniHRISServices.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 39
   at MiniHRIS4.Controllers.MiniHRISController.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
ClientConnectionId:e9a84c07-275c-456f-8541-8a57af7950ae
Error Number:208,State:1,Class:16
2025-11-15 00:28:26.822 +08:00 [ERR] HTTP GET /employees/db-error-test responded 500 in 157.0228 ms
2025-11-15 00:28:26.822 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/db-error-test - 500 null application/json; charset=utf-8 159.3349ms
2025-11-15 00:28:52.599 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/999 - null null
2025-11-15 00:28:52.600 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:28:52.612 +08:00 [INF] Route matched with {action = "GetEmployee", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEmployee(Int32) on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:28:52.768 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EmployeeId], [e].[DateHired], [e].[DepartmentId], [e].[FirstName], [e].[Lastname], [d].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
WHERE [e].[EmployeeId] = @__id_0
2025-11-15 00:28:52.769 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11) in 155.7565ms
2025-11-15 00:28:52.769 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:28:52.769 +08:00 [ERR] Unhandled exception occurred
MiniHRIS4.Exceptions.NotFoundException: No employee found
   at MiniHRIS4.Services.MiniHRISServices.GetEmployeeByIdOrThrowAsync(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 53
   at MiniHRIS4.Controllers.MiniHRISController.GetEmployee(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
2025-11-15 00:28:52.770 +08:00 [INF] HTTP GET /employees/999 responded 404 in 170.3950 ms
2025-11-15 00:28:52.770 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/999 - 404 null application/json; charset=utf-8 171.2357ms
2025-11-15 00:37:17.481 +08:00 [INF] Application is shutting down...
2025-11-15 00:37:21.410 +08:00 [INF] Now listening on: http://localhost:5232
2025-11-15 00:37:21.434 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-15 00:37:21.434 +08:00 [INF] Hosting environment: Development
2025-11-15 00:37:21.434 +08:00 [INF] Content root path: /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4
2025-11-15 00:37:25.317 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/weatherforecast/ - null null
2025-11-15 00:37:25.334 +08:00 [WRN] Failed to determine the https port for redirect.
2025-11-15 00:37:25.335 +08:00 [INF] Executing endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:37:25.342 +08:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[WebApplication11.WeatherForecast] Get() on controller WebApplication11.Controllers.WeatherForecastController (WebApplication11).
2025-11-15 00:37:25.345 +08:00 [INF] Executing ObjectResult, writing value of type 'WebApplication11.WeatherForecast[]'.
2025-11-15 00:37:25.374 +08:00 [INF] Executed action WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11) in 31.2087ms
2025-11-15 00:37:25.376 +08:00 [INF] Executed endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:37:25.376 +08:00 [INF] HTTP GET /weatherforecast/ responded 200 in 49.2020 ms
2025-11-15 00:37:25.377 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/weatherforecast/ - 200 null application/json; charset=utf-8 60.2786ms
2025-11-15 00:37:30.064 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/test-employees - null null
2025-11-15 00:37:30.067 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:37:30.071 +08:00 [INF] Route matched with {action = "GetAllEmployees", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEmployees() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:37:30.576 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[FirstName], [e].[Lastname], [e].[DateHired], [e].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
2025-11-15 00:37:30.588 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MiniHRIS4.DTOs.EmployeeDTO, WebApplication11, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-15 00:37:30.591 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11) in 520.2746ms
2025-11-15 00:37:30.592 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:37:30.592 +08:00 [INF] HTTP GET /employees/test-employees responded 200 in 525.7656 ms
2025-11-15 00:37:30.595 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/test-employees - 200 null application/json; charset=utf-8 531.9925ms
2025-11-15 00:37:33.684 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/db-error-test - null null
2025-11-15 00:37:33.686 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:37:33.689 +08:00 [INF] Route matched with {action = "DbErrorTest", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DbErrorTest() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:37:33.691 +08:00 [INF] Employee list {Employees}
2025-11-15 00:37:33.817 +08:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT * FROM NonExistentTable
2025-11-15 00:37:33.826 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniHRIS4.Models.MiniHRIS4Context'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:05f40f87-37c6-4879-b4f6-3a3835119f99
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:05f40f87-37c6-4879-b4f6-3a3835119f99
Error Number:208,State:1,Class:16
2025-11-15 00:37:33.827 +08:00 [INF] this is a database error
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MiniHRIS4.Services.MiniHRISServices.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 44
ClientConnectionId:05f40f87-37c6-4879-b4f6-3a3835119f99
Error Number:208,State:1,Class:16
2025-11-15 00:37:33.830 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11) in 140.601ms
2025-11-15 00:37:33.830 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:37:33.831 +08:00 [ERR] Unhandled exception occurred
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MiniHRIS4.Services.MiniHRISServices.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 44
   at MiniHRIS4.Controllers.MiniHRISController.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
ClientConnectionId:05f40f87-37c6-4879-b4f6-3a3835119f99
Error Number:208,State:1,Class:16
2025-11-15 00:37:33.837 +08:00 [ERR] HTTP GET /employees/db-error-test responded 500 in 152.0799 ms
2025-11-15 00:37:33.838 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/db-error-test - 500 null application/json; charset=utf-8 153.8632ms
2025-11-15 00:38:34.136 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/999 - null null
2025-11-15 00:38:34.137 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:38:34.143 +08:00 [INF] Route matched with {action = "GetEmployee", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEmployee(Int32) on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:38:34.286 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EmployeeId], [e].[DateHired], [e].[DepartmentId], [e].[FirstName], [e].[Lastname], [d].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
WHERE [e].[EmployeeId] = @__id_0
2025-11-15 00:38:34.287 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11) in 143.232ms
2025-11-15 00:38:34.287 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:38:34.287 +08:00 [ERR] Unhandled exception occurred
MiniHRIS4.Exceptions.NotFoundException: No employee found
   at MiniHRIS4.Services.MiniHRISServices.GetEmployeeByIdOrThrowAsync(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 65
   at MiniHRIS4.Controllers.MiniHRISController.GetEmployee(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
2025-11-15 00:38:34.288 +08:00 [INF] HTTP GET /employees/999 responded 404 in 151.2628 ms
2025-11-15 00:38:34.288 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/999 - 404 null application/json; charset=utf-8 152.4227ms
2025-11-15 00:44:39.690 +08:00 [INF] Application is shutting down...
2025-11-15 00:44:43.275 +08:00 [INF] Now listening on: http://localhost:5232
2025-11-15 00:44:43.298 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-15 00:44:43.299 +08:00 [INF] Hosting environment: Development
2025-11-15 00:44:43.299 +08:00 [INF] Content root path: /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4
2025-11-15 00:44:47.083 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/weatherforecast/ - null null
2025-11-15 00:44:47.100 +08:00 [WRN] Failed to determine the https port for redirect.
2025-11-15 00:44:47.102 +08:00 [INF] Executing endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:44:47.109 +08:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[WebApplication11.WeatherForecast] Get() on controller WebApplication11.Controllers.WeatherForecastController (WebApplication11).
2025-11-15 00:44:47.112 +08:00 [INF] Executing ObjectResult, writing value of type 'WebApplication11.WeatherForecast[]'.
2025-11-15 00:44:47.144 +08:00 [INF] Executed action WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11) in 33.1476ms
2025-11-15 00:44:47.145 +08:00 [INF] Executed endpoint 'WebApplication11.Controllers.WeatherForecastController.Get (WebApplication11)'
2025-11-15 00:44:47.146 +08:00 [INF] HTTP GET /weatherforecast/ responded 200 in 52.4183 ms
2025-11-15 00:44:47.147 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/weatherforecast/ - 200 null application/json; charset=utf-8 64.8329ms
2025-11-15 00:44:50.993 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/test-employees - null null
2025-11-15 00:44:50.996 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:44:51.000 +08:00 [INF] Route matched with {action = "GetAllEmployees", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEmployees() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:44:51.049 +08:00 [INF] Fetching employees...
2025-11-15 00:44:51.519 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[FirstName], [e].[Lastname], [e].[DateHired], [e].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
2025-11-15 00:44:51.531 +08:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MiniHRIS4.DTOs.EmployeeDTO, WebApplication11, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-15 00:44:51.535 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11) in 534.603ms
2025-11-15 00:44:51.535 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetAllEmployees (WebApplication11)'
2025-11-15 00:44:51.536 +08:00 [INF] HTTP GET /employees/test-employees responded 200 in 540.7877 ms
2025-11-15 00:44:51.539 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/test-employees - 200 null application/json; charset=utf-8 546.8885ms
2025-11-15 00:45:30.378 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/db-error-test - null null
2025-11-15 00:45:30.382 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:45:30.386 +08:00 [INF] Route matched with {action = "DbErrorTest", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DbErrorTest() on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:45:30.387 +08:00 [INF] Testing Db...
2025-11-15 00:45:30.517 +08:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT * FROM NonExistentTable
2025-11-15 00:45:30.526 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MiniHRIS4.Models.MiniHRIS4Context'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:206aa70a-9318-4583-9339-f7362ae5135f
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:206aa70a-9318-4583-9339-f7362ae5135f
Error Number:208,State:1,Class:16
2025-11-15 00:45:30.527 +08:00 [ERR] this is a database error
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MiniHRIS4.Services.MiniHRISServices.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 45
ClientConnectionId:206aa70a-9318-4583-9339-f7362ae5135f
Error Number:208,State:1,Class:16
2025-11-15 00:45:30.530 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11) in 143.965ms
2025-11-15 00:45:30.530 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.DbErrorTest (WebApplication11)'
2025-11-15 00:45:30.531 +08:00 [ERR] Unhandled exception occurred
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'NonExistentTable'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MiniHRIS4.Services.MiniHRISServices.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 45
   at MiniHRIS4.Controllers.MiniHRISController.DbErrorTest() in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
ClientConnectionId:206aa70a-9318-4583-9339-f7362ae5135f
Error Number:208,State:1,Class:16
2025-11-15 00:45:30.538 +08:00 [ERR] HTTP GET /employees/db-error-test responded 500 in 156.2683 ms
2025-11-15 00:45:30.538 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/db-error-test - 500 null application/json; charset=utf-8 159.7977ms
2025-11-15 00:46:02.439 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5232/employees/999 - null null
2025-11-15 00:46:02.440 +08:00 [INF] Executing endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:46:02.449 +08:00 [INF] Route matched with {action = "GetEmployee", controller = "MiniHRIS"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetEmployee(Int32) on controller MiniHRIS4.Controllers.MiniHRISController (WebApplication11).
2025-11-15 00:46:02.595 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[EmployeeId], [e].[DateHired], [e].[DepartmentId], [e].[FirstName], [e].[Lastname], [d].[DepartmentId], [d].[Name]
FROM [Employees] AS [e]
INNER JOIN [Departments] AS [d] ON [e].[DepartmentId] = [d].[DepartmentId]
WHERE [e].[EmployeeId] = @__id_0
2025-11-15 00:46:02.596 +08:00 [WRN] Employee 999 not found
2025-11-15 00:46:02.596 +08:00 [INF] Executed action MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11) in 146.6899ms
2025-11-15 00:46:02.596 +08:00 [INF] Executed endpoint 'MiniHRIS4.Controllers.MiniHRISController.GetEmployee (WebApplication11)'
2025-11-15 00:46:02.596 +08:00 [ERR] Unhandled exception occurred
MiniHRIS4.Exceptions.NotFoundException: No employee found
   at MiniHRIS4.Services.MiniHRISServices.GetEmployeeByIdOrThrowAsync(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Services/MiniHRISServices.cs:line 68
   at MiniHRIS4.Controllers.MiniHRISController.GetEmployee(Int32 id) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Controllers/MiniHRISController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in /Users/louise/Desktop/c#/MiniHRIS4/MiniHRIS4/Middlewares/ErrorHandlingMiddleware.cs:line 20
2025-11-15 00:46:02.597 +08:00 [INF] HTTP GET /employees/999 responded 404 in 157.1922 ms
2025-11-15 00:46:02.597 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5232/employees/999 - 404 null application/json; charset=utf-8 158.1889ms
